<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <base href="<% URL %>">

  <title>Uhura App - Podcasts Manager - Listen your podcasts Here!</title>

  <meta property="og:title" content="Uhura App - Podcasts Manager" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://uhuraapp.com" />
  <meta property="og:image" content="http://uhuraapp.com/assets/logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href='http://fonts.googleapis.com/css?family=Exo+2:400,200,400italic,800' rel='stylesheet' type='text/css'>

  <!--
    <link href="/assets/reset.css" rel="stylesheet">
  -->

  <link href="<% URL %>/assets/uikit.css" rel="stylesheet">
  <link href="<% URL %>/assets/font-awesome.min.css" rel="stylesheet">
  <link href="<% URL %>/assets/grid.css" rel="stylesheet">

  <link href="<% URL %>/assets/main.css" rel="stylesheet">
  <link href="<% URL %>/assets/player.css" rel="stylesheet">

  <link href="<% URL %>/assets/home.css" rel="stylesheet">
  <link href="<% URL %>/assets/dashboard.css" rel="stylesheet">
  <link href="<% URL %>/assets/channels_page.css" rel="stylesheet">
  <link href="<% URL %>/assets/channel_page.css" rel="stylesheet">


  <!-- emberjs -->
  <script src="<% URL %>/assets/vendor/jquery-1.10.2.min.js"></script>
  <script src="<% URL %>/assets/vendor/handlebars-1.0.0.js"></script>
  <script src="<% URL %>/assets/vendor/ember.js"></script>
  <script src="<% URL %>/assets/vendor/ember-data.js"></script>

  <!-- -->
  <script src="<% URL %>/assets/vendor/soundmanager2.js"></script>


  <script src="<% URL %>/assets/app.js"></script>
  <script src="<% URL %>/assets/player.js"></script>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47688976-1', 'uhuraapp.com');
    ga('send', 'pageview');
    </script>

    <script>
    (function(_,e,rr,s){_errs=[s];var c=_.onerror;_.onerror=function(){var a=arguments;_errs.push(a);
    c&&c.apply(this,a)};var b=function(){var c=e.createElement(rr),b=e.getElementsByTagName(rr)[0];
    c.src="//beacon.errorception.com/"+s+".js";c.async=!0;b.parentNode.insertBefore(c,b)};
    _.addEventListener?_.addEventListener("load",b,!1):_.attachEvent("onload",b)})
    (window,document,"script","52f485f0c3e6829e25000021");
    </script>

    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=257036014466425";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
</head>
<body>
  <script type="text/x-handlebars" id="components/play-pause-button">
    <button {{action "play" episode}} class="uk-button uk-button-large">
      <i class="fa fa-play"></i>
    </button>
  </script>

  <script type="text/x-handlebars" data-template-name="player">
    {{#if model}}
    <div id="player">
      <a href="#" {{action play_pause model}}>
        {{#if playing}}<i class="fa fa-pause"></i>{{else}}<i class="fa fa-play"></i>{{/if}}
      </a>
      <div id="loader">
        <div class="loading"></div>
        <div class="playing"></div>
      </div>
      <span class="title">{{title}}</span>
    </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="application">
    <header>
      <div class="container">
        <hgroup>
          {{#link-to 'index'}}
            <h1>Uhura</h1>
            <h2>Podcast Manager</h2>
          {{/link-to}}
        </hgroup>

        {{view Uhura.PlayerView}}

        <nav>
          <ul>
            <li>
              {{#link-to "channels"}}
              Discovery New Podcasts
              {{/link-to}}
            </li>
            <li>
              {{#link-to "dashboard"}}
              Dashboard
              {{/link-to}}
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <div id="content" class="container">
      {{outlet}}
    </div>

    <footer>
      Created with <span class="heart">â™¥</span> by <a href="https://github.com/dukex">Duke Khaos</a> with awesome <a href="https://github.com/dukex/uhura/graphs/contributors">Contributors</a>, follow us <a rel="nofollow" href="http://twitter.com/UhuraApp">@UhuraApp</a>
    </footer>
    <div id="fb-root"></div>
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    <div id="home">
      {{#link-to 'channels' id="call-to-action"}}
      Listen Amazing Podcasts
      {{/link-to}}
      <ul id="channels">
        {{#each channel in channels}}
        <li>
          {{#link-to 'channel' channel.id}}
          <div>
            <img {{bind-attr src=channel.image_url}} />
          </div>
          {{/link-to}}
        </li>
        {{/each}}
      </ul>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="channels">
    <div id="channels_page">
      <h2 class="title">Podcasts</h2>
      <form class="uk-form" {{action "newChannel" on="submit"}}>
        <fieldset data-uk-margin class="uk-vertical-align-middle">
          {{input type="url" placeholder="Poscast Feed URL"
          value=url class="form-control new-channel"}}
          <button type="submit" name="submit" class="uk-button uk-button-success">Add New</button>
        </fieldset>
      </form>

      <ul class="row">
        {{#each}}
        <li class="column one-sixth">
          {{#link-to 'channel' id}}
          <div class="img">
            <img {{bind-attr src=image_url}} />
          </div>
          <h4>{{title}}</h4>
          {{/link-to}}

          {{#if subscribed}}
          <button class="uk-button uk-button-small uk-button-success subscribe fa fa-check" {{action 'unsubscribeChannel' id}}>Subscribed</button>
          {{else}}
          {{#if uri }}
          <button class="uk-button uk-button-small uk-button-primary subscribe" {{action 'subscribeChannel' id}}>Subscribe!</button>
          {{/if}}
          {{/if}}
        </li>
        {{/each}}
        <li id="new_podcast">
          <form class="uk-form" {{action "newChannel" on="submit"}}>
            <fieldset data-uk-margin class="uk-vertical-align-middle">
              <label for="new-channel"> Add New Podcast </label>
              {{input type="url" id="new-channel" class="form-control new-channel" placeholder="Poscast Feed URL"
              value=url class="form-control"}}
              <button type="submit" name="submit" class="uk-button uk-button-success">Submit</button>
            </fieldset>
          </form>
        </li>
      </ul>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="channel">
    <div id="channel_page" itemscope itemtype="http://schema.org/MusicGroup">
      <h2 itemprop="name">{{title}}</h2>
      <aside>
        <img {{bind-attr src=image_url}} />
        {{#if subscribed}}
        <button class="uk-button uk-button-large uk-button-success subscribe fa fa-check" {{action 'unsubscribeChannel' id}}>Subscribed</button>
        {{else}}

        <button id="subscribeButton" class="uk-button uk-button-large uk-button-primary subscribe" {{action 'subscribeChannel' id}}>Subscribe!</button>
        {{/if}}

        <div id="description">
          {{description}}
        </div>
        <p>{{copyright}}</p>
      </aside>
      <div id="episodes">
        <ol>
          {{#each episode in episodes}}
           <li class="audio" {{bind-attr data-listened=episode.listened}} {{bind-attr data-id=episode.id}} {{bind-attr data-source_url=episode.source_url}} itemscope itemtype="http://schema.org/MusicRecording">

             {{play-pause-button episode=episode}}

             {{#link-to 'channel.episode' episode.id class="title"}}
               <span itemprop="name">{{episode.title}}</span>
             {{/link-to}}

             <meta content="{{unbound episode.url}}" itemprop="audio">
             <meta content="{{unbound episode.url}}" itemprop="url">
             <meta content="{{unbound episode.channel.title}}" itemprop="inAlbum">
           </li>
          {{/each}}
        </ol>
      </div>
      {{outlet}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="channel/episode">
    <div id="episode_modal" class="uk-modal uk-open" style="display: block;">
      <div class="uk-modal-dialog">
        {{#link-to 'channel' channel_id class="uk-modal-close uk-close"}}{{/link-to}}
        <h1>{{title}}</h1>
        <div class="actions">
          {{play-pause-button episode=this}}

          <a href="https://plus.google.com/share" onclick="javascript:window.open(this.href+'?url='+window.location.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><img src="https://www.gstatic.com/images/icons/gplus-32.png" alt="Share on Google+"/></a>

          <a href="https://www.facebook.com/sharer/sharer.php" onclick="javascript:window.open(this.href+'?u='+window.location.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" class="fbsharebutton">Share on Facebook</a>

          <iframe allowtransparency="true" frameborder="0" scrolling="no" src="https://platform.twitter.com/widgets/tweet_button.html?count=none&related=UhuraApp&via=UhuraApp&dnt=true&text={{unbound title}}"  style="width:60px; height:20px;"></iframe>

          <input type="text" {{bind-attr value=url}} readonly="true" />
        </div>

        <div id="description">
          {{description}}
        </div>
      </div>
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="dashboard">
    <div id="dashboard">
      <h2>Dashboard</h2>
      {{#if subscriptions}}
      <div class="outter">
        <div class="inner">
          <ul id="channels">
            {{#each subscription in subscriptions}}
            {{#with subscription.channel}}
            <li class="channel" id="channel-{{unbound id}}">
              {{#link-to 'dashboard.channel' id}}
              <img {{bind-attr src=image_url}} />
              <span class="title">{{title}}</span>
              <div class="uk-badge uk-badge-notification uk-badge-warning">
                {{to_view}}
              </div>
              {{/link-to}}
               <button class="unsubscribe uk-button uk-button-small uk-button-danger" {{action 'unsubscribe' id}}>Unsubscribe</button>
            </li>
            {{/with}}
            {{/each}}
          </ul>
          <div id="dashboard_content">
            {{outlet}}
          </div>
        </div>
      </div>
      {{else}}
        <form class="uk-form" {{action "newChannel" on="submit"}}>
            <fieldset data-uk-margin class="uk-vertical-align-middle">
            <legend>Dashboard Empty</legend>
              <label for="new-channel"> Add New Podcast </label>
              {{input type="url" id="new-channel" class="form-control new-channel" placeholder="Poscast Feed URL"
              value=url class="form-control"}}
              <button type="submit" name="submit" class="uk-button uk-button-large uk-button-success">Submit</button>
            </fieldset>

            {{#link-to 'channels'}}See Podcasts{{/link-to}}
          </form>
      {{/if}}
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="dashboard/index">
    <div id="episodes">
      <ol>
        {{#each subscription in controllers.dashboard.subscriptions}}
        {{#each episode in subscription.episodes}}
        <li class="audio" {{bind-attr data-listened=episode.listened}} {{bind-attr data-id=episode.id}} {{bind-attr data-source_url=episode.source_url}}>
          {{play-pause-button episode=episode}}
          <h3>
            <span class="title">{{episode.title}}</span>
            <i class="fa fa-chevron-down"></i>
          </h3>
          <div class="description">
            {{#unless episode.listened}}
            <button class="uk-button uk-button-success" alt="Mark as Listen!" {{action 'listened' episode}}>
              Mark as Listened
            </button>
            {{/unless}}
            {{#link-to 'channel.episode' episode.channel_id episode.id}}
            Share Episode
            {{/link-to}}
            <div style="clear:both">{{{episode.description}}}</div>
          </div>
        </li>
        {{/each}}
        {{/each}}
      </ol>
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="dashboard/channel">
    <div id="episodes">
      <ol>
        {{#each episode in episodes}}
          <li class="audio" {{bind-attr data-listened=episode.listened}} {{bind-attr data-id=episode.id}} {{bind-attr data-source_url=episode.source_url}}>
            {{play-pause-button episode=episode}}
            <h3>
              <span class="title">{{episode.title}}</span>
              <i class="fa fa-chevron-down"></i>
            </h3>
            <div class="description">
              {{#unless episode.listened}}
              <button class="uk-button uk-button-success" alt="Mark as Listen!" {{action 'listened' episode}}>
                Mark as Listened
              </button>
              {{/unless}}
              {{#link-to 'channel.episode' episode.channel_id episode.id}}
              Share Episode
              {{/link-to}}
              <div>{{{episode.description}}}</div>
            </div>
          </li>
        {{/each}}
      </ol>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="loading">
    <div id="loading_page">
      Loading.....
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="channel/loading">
    <div id="loading_page">
      Loading.....
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="dashboard/loading">
    <div id="loading_page">
      Loading.....
    </div>
  </script>
</body>
</html>
